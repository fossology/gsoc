"use strict";(self.webpackChunkgosc=self.webpackChunkgosc||[]).push([[96696],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>r});var t=s(96540);const i={},l=t.createContext(i);function o(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(l.Provider,{value:n},e.children)}},39869:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"2021/buildsystem/build","title":"Building FOSSology","description":"\x3c!--","source":"@site/docs/2021/buildsystem/build.md","sourceDirName":"2021/buildsystem","slug":"/2021/buildsystem/build","permalink":"/gsoc/docs/2021/buildsystem/build","draft":false,"unlisted":false,"editUrl":"https://github.com/fossology/gsoc/edit/main/docs/2021/buildsystem/build.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"title":"Building FOSSology"},"sidebar":"2021","previous":{"title":"Week 10","permalink":"/gsoc/docs/2021/buildsystem/updates/2021-08-13"},"next":{"title":"First Evaluation","permalink":"/gsoc/docs/2021/buildsystem/first-evaluation"}}');var i=s(74848),l=s(28453);const o={sidebar_position:3,title:"Building FOSSology"},r=void 0,a={},c=[];function d(e){const n={a:"a",code:"code",em:"em",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"Install CMake if you haven't already (minimum 3.10 required)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"    sudo apt install CMake # for Debian based systems\n"})}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Since the new build system is still in review. You must fork\nFOSSology and pull the\n",(0,i.jsx)(n.a,{href:"https://github.com/fossology/fossology/pull/2075",children:"#2075"})," pull\nrequest branch. Once you are in FOSSology root, run these commands."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git fetch https://github.com/avinal/fossology avinal/feat/buildsystem:buildsystem\ngit checkout buildsystem\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["The first step towards building is to create a temporary directory\nfor storing intermediate files and build artifacts. By convention we\nuse a directory named ",(0,i.jsx)(n.code,{children:"build"}),", but you can use any\nname. (",(0,i.jsx)(n.strong,{children:"NOTE: For testing do not use other names"}),")"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"mkdir build\ncd build\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"In the next steps, we will configure the CMake project and generate\nthe required configurations. You can use several flags to control\nthe build. Given below are the flags available for this project."}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"CMake Flags"}),(0,i.jsx)(n.th,{children:"Description"}),(0,i.jsx)(n.th,{children:"Default"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"-DCMAKE_INSTALL_PREFIX=<path>"})}),(0,i.jsx)(n.td,{children:"Sets the install prefix."}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"/usr/local"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:'-DAGENTS="agent1;agent2..."'})}),(0,i.jsx)(n.td,{children:"Only configure these agents."}),(0,i.jsx)(n.td,{children:"ALL AGENTS"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"-DOFFLINE=<ON/OFF>"})}),(0,i.jsx)(n.td,{children:"Controls vendor generation, ON=NO"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"OFF"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"-DCMAKE_BUILD_TYPE=<type>"})}),(0,i.jsxs)(n.td,{children:["-   ",(0,i.jsx)(n.code,{children:"Debug"}),", ",(0,i.jsx)(n.code,{children:"Release"}),", ",(0,i.jsx)(n.code,{children:"RelWithDebInfo"}),",",(0,i.jsx)(n.code,{children:"MinSizeRel"})]}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"Debug"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"-DTESTING=<ON/OFF>"})}),(0,i.jsx)(n.td,{children:"Controls testing config generation"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"OFF"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"-DMONOPACK=<ON/OFF>"})}),(0,i.jsx)(n.td,{children:"Package adj2nest and ununpack seperately"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"OFF"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"-GNinja"})}),(0,i.jsx)(n.td,{children:"Use Ninja instead of Unix Makefiles"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"Unix MakeFiles"})})]})]})]}),"\n",(0,i.jsxs)(n.p,{children:["There are lots of inbuilt CMake command-line options you can see them in the official ",(0,i.jsx)(n.a,{href:"https://cmake.org/cmake/help/v3.10/manual/cmake.1.html",children:"documentation"}),". Once you have chosen your flags we can now configure the project using the following commands."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# From build folder\ncd <name-of-build-directory>\ncmake <flags> ..\n"})}),"\n",(0,i.jsxs)(n.p,{children:["4 .  The next step is to build the project. You can use parallel jobs to build faster. For more options you can type ",(0,i.jsx)(n.code,{children:"cmake --help"})," or ",(0,i.jsx)(n.code,{children:"make --help"})," or ",(0,i.jsx)(n.code,{children:"ninja --help"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Common build command for all generators,\n# Default number of parallel builds depends on generator used\ncmake --build . --parallel <no-of-processes>\n\n# For Unix Makefiles, no parallel build by default\nmake -j <no-of-processes>\n\n# For Ninja, 8+ parallel build by default (depends on system)\nninja -j <no-of-processes>\n"})}),"\n",(0,i.jsxs)(n.ol,{start:"5",children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Installing is also as easy as building. You can choose to install\nonly certain components even if you have built the whole project. If\nyou directly invoke the install command without building the\nproject, it will automatically build the project first."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# For Unix Makefiles\nmake install\n\n# For Ninja\nninja install\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["While testing has some issues, but most of the testing is working\nfine. For now, you must build and run any test from the FOSSology\nroot directory only. You can choose to configure a single agent if\nyou want to test one agent only. See ",(0,i.jsx)(n.code,{children:"ctest --help"})," for\ncontrolling test runs."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Common testing command\nctest --parallel <no-of-processes>\n\n# For Unix Makefiles\nmake test\n\n# For Ninja\nninja test\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You can package FOSSology, the packaging currently lacks copyright\nand conf files. But for testing purposes, you can use the following\ncommands. Similar to installing, if you run the package command\nwithout building the project, it will automatically build the\nproject first. See ",(0,i.jsx)(n.code,{children:"cpack --help"})," for more packaging\noptions."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Common testing command\ncpack\n\n# For Unix Makefiles\nmake package\n\n# For Ninja\nninja package\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Some targets are not built by default, you can manually trigger their build by running ",(0,i.jsx)(n.code,{children:"make ,target-name>"})," or ",(0,i.jsx)(n.code,{children:"ninja <target-name>"}),". You can list all the targets by running ",(0,i.jsx)(n.code,{children:"make help"})," or ",(0,i.jsx)(n.code,{children:"ninja -t targets"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["You can also use ",(0,i.jsx)(n.a,{href:"https://code.visualstudio.com/docs/cpp/cmake-linux",children:"CMake EXtension for VS Code"})," for seamlessly populating and building targets. Can also use gitpod.io for quick setup"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);